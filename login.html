<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>木模戳印花</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/login.css" />
    <script src="js/style.js"></script>
  </head>

  <body>
    <header>
      <div class="logo">木模戳印花</div>
      <nav>
        <a href="index.html">首页</a>
      <a href="introduction.html">"模印"介绍</a>
      <a href="production.html">"模印"制作</a>
      <a href="activity.html">"模印"活动</a>
      <a href="interaction.html">"模印"交流</a>
      <a href="contact.html">关于我们</a>
      <a href="login.html">登录/注册</a>
      <a href="#" onclick="logout()">注销</a>
      </nav>
    </header>
    <section class="auth-section">
      <div class="auth-container">
        <div class="auth-left">
          <h2 style="color: #7a4f26">欢迎回来</h2>
          <p style="color: #7a4f26">已有账号？点击下方登录</p>
          <button onclick="switchToLogin()">SIGN IN</button>
        </div>
        <div class="auth-right">
          <h2 id="form-title">注册</h2>
          <input type="text" id="username" placeholder="用户名" />
          <input type="password" id="password" placeholder="密码" />
          <button id="submit-btn" onclick="register()">注册</button>
        </div>
      </div>
    </section>

    <footer>
      <div>
        <p>服务热线：18767031040</p>
        <p>地址：新疆维吾尔自治区乌鲁木齐市沙依巴克区农大东路311号</p>
        <p>技术支持：新疆农业大学</p>
      </div>
    </footer>

    <script>
      function switchToLogin() {
        document.getElementById("form-title").textContent = "登录";
        document.getElementById("submit-btn").textContent = "登录";
        document.getElementById("submit-btn").onclick = login;
      }

      function register() {
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value;

        if (!username || !password) {
          alert("用户名和密码不能为空");
          return;
        }

        const users = JSON.parse(localStorage.getItem("users") || "{}");

        if (users[username]) {
          alert("用户名已存在");
        } else {
          users[username] = password;
          localStorage.setItem("users", JSON.stringify(users));
          alert("注册成功！");
        }
      }

      function login() {
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value;

        const users = JSON.parse(localStorage.getItem("users") || "{}");

        if (users[username] === password) {
          localStorage.setItem("currentUser", username);
          alert("登录成功！");
          window.location.href = "index.html"; // 登录成功后跳转
        } else {
          alert("用户名或密码错误！");
        }
      }
    </script>
  </body>
</html>
